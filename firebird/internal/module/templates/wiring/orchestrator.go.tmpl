// Code generated by Firebird. DO NOT EDIT.
// This file is regenerated whenever modules are added or removed.
// Last generated: {{ .GeneratedAt }}

package modules

import (
	"database/sql"
	"fmt"

	"{{ .ProjectModule }}/internal/config"
)

// InitModules initializes all installed Firebird modules
// Call this during application startup to set up module services
// Returns a ModuleRegistry containing all module services
func InitModules(db *sql.DB, cfg *config.Config) (*ModuleRegistry, error) {
	registry := NewModuleRegistry()

{{- range .Modules }}
	// Initialize {{ .Name }} v{{ .Version }}
	if err := Init{{ .InitFunc }}(db, cfg, registry); err != nil {
		return nil, fmt.Errorf("initializing {{ .Name }}: %w", err)
	}
{{- end }}

	return registry, nil
}

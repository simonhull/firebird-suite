// Code generated by Firebird module: {{ .ModuleName }} v{{ .ModuleVersion }}
// DO NOT EDIT - This file will be deleted when the module is removed
// Generated: {{ .GeneratedAt }}

package modules

import (
	"database/sql"
	"fmt"

	"{{ .ProjectModule }}/internal/config"
{{- range .Imports }}
	"{{ . }}"
{{- end }}
)

// Init{{ .InitFunc }} initializes the {{ .ModuleName }} module
// This function is called by InitModules() during application startup
func Init{{ .InitFunc }}(db *sql.DB, cfg *config.Config, registry *ModuleRegistry) error {
{{- if .ValidateConfig }}
	// Validate module configuration
	if err := validate{{ .InitFunc }}Config(cfg); err != nil {
		return fmt.Errorf("invalid {{ .ModuleName }} config: %w", err)
	}
{{- end }}

	{{ .InitBody }}

	return nil
}

{{- if .ValidateConfig }}

// validate{{ .InitFunc }}Config validates the module configuration
func validate{{ .InitFunc }}Config(cfg *config.Config) error {
	{{ .ValidationBody }}
	return nil
}
{{- end }}
